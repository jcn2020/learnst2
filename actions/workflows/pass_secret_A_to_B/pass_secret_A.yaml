---
version: 1.0
description: pass secret from action A to action B of the same pack

input:
  - secret_A
  - execution_id:  "<% ctx(st2).action_execution_id %>"  
vars:
  - secret_string: nil
  - my_array: ['"', 'st2kv.system.mytopsecret', '"']

tasks:
  log_execution_id:
    action: core.local
    input:
      cmd: >
        echo "log execution id = <% ctx().execution_id %> " 
    next:
      - when: <% succeeded() %>
        publish: 
          - secret_string: {{ ctx().my_array | join(" " }}

 