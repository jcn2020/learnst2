---
version: 1.0
description: manipulate arrays and objects
input: 
  - my_array
  - my_object

vars:
  - temp: nil 

output:
  - result: <% ctx().my_array %>

tasks: 
  print_array:
    action: core.local
    input: 
      # work - cmd: "echo array = <% ctx().my_array %>"
      cmd: "echo array = the value is <% ctx().my_array[0] %> and <% ctx().my_array[2] %>"
    next: 
      - when: <% succeeded() %> 
        publish:
          - temp: <% ctx().my_array %>
        do: print_object
  
  print_object:
    action: core.local
    input: 
      # work - cmd: "echo object = <% ctx().my_object %>"
      # work - cmd: "echo object = <% ctx().my_object['obj1'] %> and list1 <% ctx().my_object['list1'][0] %> and <% ctx().my_object['list1'][2] %>"
      cmd: "echo object = <% ctx().my_object.obj1.subkey3.minisubkey3.minikey2 %>"
    next:
      - when: <% succeeded() %> 
        do: loop_array

  loop_array:
    action: core.local
    with: 
     <% ctx().my_array %>
    input:
      cmd: "echo looping array item = <% ctx().item %>"
      # cmd: "echo hello"

    